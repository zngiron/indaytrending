fragment POST_FRAGMENT on Post {
  id
  slug
  title
  published: date
  modified
  image: featuredImage {
    featured: sourceUrl,
    medium: sourceUrl(size:MEDIUM)
  }
}

fragment PAGE_FRAGMENT on Page {
  id
  slug
  title
  published: date
  modified
  content
}

fragment CATEGORY_FRAGMENT on Category {
  id
  name
  slug
  description
}

query GET_FEED($first: Int, $categoryName: String) {  
  posts(
    first: $first,
    where: {
      categoryName: $categoryName, 
      status: PUBLISH
    }
  ) {
    nodes {
      ...POST_FRAGMENT
      content
      categories{
        nodes {
          ...CATEGORY_FRAGMENT
        }
      }
    }
  }
}

query GET_POSTS($first: Int, $after: String, $category: ID!, $categoryName: String) {  
  posts(
    first: $first,
    after: $after,
    where: {
      categoryName: $categoryName, 
      status: PUBLISH
    }
  ) {
    nodes {
      ...POST_FRAGMENT
      categories(
        where: {
          exclude: 2
        }
      ) {
        nodes {
          ...CATEGORY_FRAGMENT
        }
      }
    }
  }
  category(id: $category, idType: SLUG) {
    ...CATEGORY_FRAGMENT
  }
}

query GET_POST($slug: ID!) {
  post(id: $slug, idType:SLUG) {
    ...POST_FRAGMENT
    content
    categories(where: {
      exclude: 2
    }) {
      nodes {
        ...CATEGORY_FRAGMENT
      }
    }
  }
}

query GET_PAGE($page: ID!) {
  page(id: $page, idType: URI) {
    ...PAGE_FRAGMENT
  }
}

query GET_CATEGORIES {
  categories {
    nodes {
      ...CATEGORY_FRAGMENT
    }
  }
}
