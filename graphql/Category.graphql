#import './Category.fragment.graphql'
#import './Post.fragment.graphql'

query Category($first: Int, $after: String, $last: Int, $before: String, $category: String) {
  posts(
    first: $first, 
    after: $after, 
    last: $last, 
    before: $before,
    where: {
      categoryName: $category,
      dateQuery: {
        after: {
          month: 1,
          year: 2019
        }
      }, 
      status: PUBLISH
    }
  ) {
    pageInfo {
      startCursor
      endCursor
      hasNextPage
      hasPreviousPage
    }
    edges {
      node {
        ...Post
        image: featuredImage {
          node {
            featured: sourceUrl
          }
        }
        categories {
          edges {
            node {
              ...Category
            }
          }
        }
      }
    }
  }
  categories {
    edges {
      node {
        ...Category
      }
    }
  }
}